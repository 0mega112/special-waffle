<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Fyber Balance</title>
    <link rel="stylesheet" href="balance.css">
</head>
<body class="balance-page">

    <div class="page-container">
        
        <!-- Header -->
        <header class="page-header">
            <h1 class="page-title">Баланс</h1>
        </header>

        <!-- Balance Section -->
        <div class="card main-balance-card">
            <div class="balance-glow-box">
                <span class="balance-amount" id="balance-amount">$0.00</span>
            </div>
            
            <button class="withdraw-btn">Вывод средств</button>
        </div>

        <!-- History Section -->
        <div class="card history-card animate-slide-up">
            <div class="card-header">
                <span class="card-label">История Профитов</span>
                <div class="history-icon">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="#e0f2e9">
                        <path d="M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z"/>
                    </svg>
                </div>
            </div>

            <div class="empty-state">
                <div class="folder-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="#1f3a2d" stroke-width="1">
                        <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
                    </svg>
                </div>
                <p class="empty-text">Здесь появятся<br>ваши профиты</p>
            </div>
        </div>

    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <a href="dashboard.html" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
            </svg>
        </a>
        
        <a href="#" class="nav-item active">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <line x1="12" y1="1" x2="12" y2="23"></line>
                <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
            </svg>
            <span>Баланс</span>
        </a>
        
        <a href="#" class="nav-item">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
        </a>
    </nav>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const savedID = localStorage.getItem("fyber_current_id");
            
            // Якщо ID немає, можливо користувач не залогінився, але спробуємо показати кеш або 0
            if (!savedID) { 
                console.log("No User ID found");
                return;
            }

            try {
                // ПРЯМИЙ ЗАПИТ ДО JSON (як просили)
                const response = await fetch('balances.json');
                
                if (response.ok) {
                    const data = await response.json();
                    
                    // Знаходимо користувача в JSON
                    const userData = data[savedID];
                    
                    if (userData) {
                        // Оновлюємо тільки баланс
                        document.getElementById('balance-amount').textContent = '$' + userData.balance;
                    }
                }
            } catch (e) {
                console.error("Error fetching balance:", e);
            }
        });
    </script>
</body>
</html>
